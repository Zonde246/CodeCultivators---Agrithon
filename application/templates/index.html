<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Sugarcane AI - 45 Questions</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üåæ Simple Sugarcane AI</h1>
            <p>Easy 45-Question Disease & Pest Detection for Farmers</p>
        </div>
        
        <div class="content">
            <div class="features-badge">
                ‚úÖ 45 Simple Questions Only | üö´ No Complex Expert Terms | ‚ö° 5-10 Minutes | üéØ Farmer-Friendly
            </div>

            <!-- Main Pipeline Selector -->
            <div class="pipeline-selector" id="mainSelector">
                <h2 class="pipeline-title">Choose Your Detection Method</h2>
                <p class="pipeline-subtitle">Select between individual analysis or our smart AI fusion system</p>
                
                <div class="pipeline-options">
                    <div class="pipeline-card" data-pipeline="individual">
                        <span class="pipeline-icon">üî¨</span>
                        <h3>Individual Analysis</h3>
                        <p>Choose specific detection methods - simple quiz, image analysis, or data upload for targeted diagnosis</p>
                    </div>
                    
                    <div class="pipeline-card" data-pipeline="fusion">
                        <span class="pipeline-icon">üß¨</span>
                        <h3>Smart AI Fusion</h3>
                        <p>Complete the simple 45-question quiz first, then upload an image for combined AI analysis with higher accuracy</p>
                    </div>
                </div>
            </div>

            <!-- Individual Analysis Section -->
            <div id="individualAnalysis" class="individual-analysis hidden">
                <div class="model-selector">
                    <h2 class="section-title">Select Detection Method & Input Type</h2>
                    <div class="model-grid">
                        <div class="model-card" data-model="disease_yolo" data-input="image">
                            <div class="input-type-badge">IMAGE</div>
                            <h3>ü¶† Disease Detection</h3>
                            <p>Upload sugarcane field images for AI-powered disease identification</p>
                            <div class="status">
                                <span class="status-indicator status-not-loaded" id="status-disease-yolo"></span>
                                <span>Model Status</span>
                            </div>
                        </div>
                        
                        <div class="model-card" data-model="insect_yolo" data-input="image">
                            <div class="input-type-badge">IMAGE</div>
                            <h3>üêõ Pest Detection</h3>
                            <p>Upload crop images for automated pest identification</p>
                            <div class="status">
                                <span class="status-indicator status-not-loaded" id="status-insect-yolo"></span>
                                <span>Model Status</span>
                            </div>
                        </div>
                        
                        <div class="model-card" data-model="disease_tabnet" data-input="quiz">
                            <div class="input-type-badge">45 QUESTIONS</div>
                            <h3>üìã Disease Assessment</h3>
                            <p>Complete simple diagnostic questionnaire for disease analysis</p>
                            <div class="status">
                                <span class="status-indicator status-not-loaded" id="status-disease-tabnet-quiz"></span>
                                <span>Model Status</span>
                            </div>
                        </div>
                        
                        <div class="model-card" data-model="insect_tabnet" data-input="quiz">
                            <div class="input-type-badge">45 QUESTIONS</div>
                            <h3>üîç Pest Assessment</h3>
                            <p>Complete simple questionnaire for pest detection</p>
                            <div class="status">
                                <span class="status-indicator status-not-loaded" id="status-insect-tabnet-quiz"></span>
                                <span>Model Status</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Individual Interface Section -->
            <div id="individualInterface" class="individual-interface">
                <button class="back-button" onclick="backToMainSelector()">‚Üê Back to Main Menu</button>
                
                <!-- Individual Image Upload -->
                <div id="individualImageUpload" class="step-content">
                    <h3 class="step-title" id="individualImageTitle">Upload Image for Analysis</h3>
                    <div class="image-upload" id="individualUploadArea">
                        <div class="upload-icon">üì∏</div>
                        <div class="upload-text">Upload an image of your sugarcane crop</div>
                        <p>Drag and drop an image here or click to select</p>
                        <input type="file" id="individualFileInput" class="file-input" accept=".png,.jpg,.jpeg,.gif">
                        <button class="upload-btn" onclick="document.getElementById('individualFileInput').click()">
                            üìÅ Choose Image
                        </button>
                        <div class="file-preview" id="individualFilePreview">
                            <img id="individualPreviewImage" class="preview-image" alt="Preview">
                            <p id="individualFileName"></p>
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="action-btn" id="analyzeIndividualImage" disabled onclick="analyzeIndividualImage()">
                            üîç Analyze Image
                        </button>
                    </div>
                </div>

                <!-- Individual Quiz -->
                <div id="individualQuiz" class="step-content">
                    <h3 class="step-title" id="individualQuizTitle">Complete Assessment Questions</h3>
                    <div class="quiz-container">
                        <div class="quiz-stats">
                            <div class="stat-item">
                                <div class="stat-value" id="individualAnsweredCount">0</div>
                                <div class="stat-label">Answered</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">45</div>
                                <div class="stat-label">Simple Questions</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="individualProgressPercent">0%</div>
                                <div class="stat-label">Progress</div>
                            </div>
                        </div>
                        
                        <div class="quiz-progress">
                            <div class="quiz-progress-fill" id="individualProgressBar"></div>
                        </div>
                        
                        <div class="questions-grid" id="individualQuestionsContainer">
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="action-btn" id="analyzeIndividualQuiz" disabled onclick="analyzeIndividualQuiz()">
                            üìä Analyze Assessment
                        </button>
                    </div>
                </div>

                <!-- Individual Results -->
                <div id="individualResults" class="step-content">
                    <div class="results-header">
                        <h3 class="results-title" id="individualResultsTitle">Analysis Results</h3>
                        <p class="results-subtitle" id="individualResultsSubtitle">Individual analysis results</p>
                    </div>
                    
                    <div class="results-grid">
                        <div class="result-panel">
                            <h3 id="individualResultType">Analysis Result</h3>
                            <div class="confidence-score" id="individualConfidence">--</div>
                            <p id="individualResult">Processing...</p>
                        </div>
                    </div>
                    
                    <div id="individualDetailedResults"></div>
                    
                    <div class="action-buttons">
                        <button class="action-btn secondary" onclick="startNewIndividualAnalysis()">
                            üîÑ New Analysis
                        </button>
                        <button class="action-btn" onclick="downloadIndividualResults()">
                            üìÑ Download Report
                        </button>
                    </div>
                </div>
            </div>

            <!-- Fusion Pipeline Section -->
            <div id="fusionPipeline" class="fusion-pipeline">
                <button class="back-button" onclick="backToMainSelector()">‚Üê Back to Main Menu</button>

                <!-- Step 1: Choose Target -->
                <div class="step-content active" id="step1-content">
                    <h3 class="step-title">Step 1: Choose What to Detect</h3>
                    <div class="pipeline-options">
                        <div class="pipeline-card" data-target="disease">
                            <span class="pipeline-icon">ü¶†</span>
                            <h3>Disease Detection</h3>
                            <p>Detect sugarcane diseases through simple 45-question assessment and image analysis</p>
                        </div>
                        
                        <div class="pipeline-card" data-target="esb">
                            <span class="pipeline-icon">üêõ</span>
                            <h3>Pest Detection</h3>
                            <p>Identify pests and early shoot borer infestations using simple questions and AI analysis</p>
                        </div>
                    </div>
                    <div class="action-buttons">
                        <button class="action-btn" id="proceedToQuiz" disabled onclick="proceedToQuiz()">
                            Proceed to Simple Quiz ‚Üí
                        </button>
                    </div>
                </div>

                <!-- Step 2: Quiz -->
                <div class="step-content" id="step2-content">
                    <h3 class="step-title" id="quizStepTitle">Step 2: Complete Simple Assessment</h3>
                    <div class="quiz-container">
                        <div class="quiz-stats">
                            <div class="stat-item">
                                <div class="stat-value" id="answeredCount">0</div>
                                <div class="stat-label">Answered</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">45</div>
                                <div class="stat-label">Simple Questions</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="progressPercent">0%</div>
                                <div class="stat-label">Progress</div>
                            </div>
                        </div>
                        
                        <div class="quiz-progress">
                            <div class="quiz-progress-fill" id="progressBar"></div>
                        </div>
                        
                        <div class="questions-grid" id="questionsContainer">
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="action-btn secondary" onclick="goBackToTarget()">
                            ‚Üê Back to Target Selection
                        </button>
                        <button class="action-btn" id="completeQuiz" disabled onclick="completeQuiz()">
                            Complete Simple Quiz ‚Üí
                        </button>
                    </div>
                </div>

                <!-- Step 3: Image Upload -->
                <div class="step-content" id="step3-content">
                    <h3 class="step-title">Step 3: Upload Sugarcane Image</h3>
                    <div class="image-upload" id="imageUploadArea">
                        <div class="upload-icon">üì∏</div>
                        <div class="upload-text">Upload an image of your sugarcane crop</div>
                        <p>Drag and drop an image here or click to select</p>
                        <input type="file" id="fusionFileInput" class="file-input" accept=".png,.jpg,.jpeg,.gif">
                        <button class="upload-btn" onclick="document.getElementById('fusionFileInput').click()">
                            üìÅ Choose Image
                        </button>
                        <div class="file-preview" id="filePreview">
                            <img id="previewImage" class="preview-image" alt="Preview">
                            <p id="fileName"></p>
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="action-btn secondary" onclick="goBackToQuiz()">
                            ‚Üê Back to Quiz
                        </button>
                        <button class="action-btn" id="startFusionAnalysis" disabled onclick="startFusionAnalysis()">
                            üß¨ Start Smart AI Analysis
                        </button>
                    </div>
                </div>

                <!-- Step 4: Results -->
                <div class="step-content" id="step4-content">
                    <div class="results-header">
                        <h3 class="results-title">üß¨ Smart AI Results</h3>
                        <p class="results-subtitle">Combined analysis from simple quiz and image detection</p>
                    </div>
                    
                    <div class="results-grid">
                        <div class="result-panel">
                            <h3>üìã Quiz Analysis</h3>
                            <div class="confidence-score" id="quizConfidence">--</div>
                            <p id="quizResult">Processing assessment...</p>
                        </div>
                        
                        <div class="result-panel">
                            <h3>üì∏ Image Analysis</h3>
                            <div class="confidence-score" id="imageConfidence">--</div>
                            <p id="imageResult">Processing image...</p>
                        </div>
                        
                        <div class="result-panel">
                            <h3>üß¨ Smart AI Score</h3>
                            <div class="confidence-score" id="fusionConfidence">--</div>
                            <p id="fusionResult">Calculating smart results...</p>
                        </div>
                    </div>
                    
                    <div id="detailedResults"></div>
                    
                    <div class="action-buttons">
                        <button class="action-btn secondary" onclick="startNewAnalysis()">
                            üîÑ Start New Analysis
                        </button>
                        <button class="action-btn" onclick="downloadResults()">
                            üìÑ Download Report
                        </button>
                    </div>
                </div>
            </div>

            <!-- Loading and Error States -->
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>Processing analysis...</p>
            </div>

            <div class="error" id="error"></div>
        </div>
    </div>

    <script src="static/script.js"></script>
</body>
</html>